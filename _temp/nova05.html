<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Skillsoft Demo Net</title>
    <link rel="icon" href="./nova-favicon.ico" type="image/x-icon" />
    <!-- Stylesheets-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
    <link href="https://fonts.cdnfonts.com/css/amazon-ember" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="./css/index.css" />
    <link rel="stylesheet" type="text/css" href="./css/nova.css" />
    <!-- jQuery Plugins -->
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <!-- AWS SDK JavaScript -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.793.0.min.js"></script>
    <!-- Fontawesome Script -->
    <script src="https://kit.fontawesome.com/76cc0c3519.js" crossorigin="anonymous"></script>
</head>


<body>
    <div class="container">
        <h1>Amazon Bedrock - Nova Pro Prompt</h1>

        <label for="model">Choose a model:</label>
        <select id="model">
            <option value="global.amazon.nova-2-lite-v1:0">amazon.nova-2-lite-v1:0</option>
            <option value="amazon.nova-pro-v1:0">amazon.nova-pro-v1:0</option>
            <option value="us.amazon.nova-lite-v1:0">us.amazon.nova-lite-v1:0</option>
            <option value="us.amazon.nova-micro-v1:0">us.amazon.nova-micro-v1:0</option>
            <option value="us.amazon.nova-premier-v1:0">us.amazon.nova-premier-v1:0</option>
        </select>

        <details>
            <summary>View Model Specifications</summary>
            <textarea id="prompt" rows="10">
You are an AWS expert and you need to answer amultplecoice question, you cannot make any assumptions, everything not
mentioned is default.
I expect a response in 2 parts:
- I want you to identify and repeat the correct answer
- I want detailed explanation
- I need the response in the following format:
{
"ExamID": {
"S": "SAP-C02"
},
"QuestionID": {
"S": "1"
},
"CorrectAnswerIndices": {
"L": [
{
"N": "0"
}
]
},
"Explanation": {
"S": "The answer **"A. Amazon Kinesis Data Streams"** is correct.\n\nKinesis Data Streams is designed for real-time streaming data ingestion, making it ideal for IoT scenarios. AWS
Glue is used for ETL (Extract, Transform, Load), while Redshift and RDS are more for structured data storage."
},
"Identifier": {
"S": "Question 1"
},
"Options": {
"L": [
{
"S": "A. Amazon Kinesis Data Streams"
},
{
"S": "B. AWS Glue"
},
{
"S": "C. Amazon Redshift"
},
{
"S": "D. Amazon RDS"
}
]
},
"QuestionText": {
"S": "Which AWS service is best suited for real-time data ingestion from IoT devices? "
}
}
In CorrectAnswerIndices we announce the corrcet items from te list of Options, 
in this case we have only one correct answer, so we have only one item in the list. 
It make sure the ultimate value is always a nummeric value so where the answer is B the value will be 1

In Options we have the list of all possible answers, in this case we have 4 options.
From this list we need to select the correct option or options if the question text refers to multiple answers
            </textarea>
        </details>

        <label for="input">Enter your summary or bullet points:</label>
        <textarea id="input" rows="8" placeholder="Your summary..."></textarea>

        <button onclick="submitRequest()">Submit</button>

        <div class="loading" id="loading">Processing...</div>

        <div id="result" class="result" style="display: none;">
            <div id="markdown-output"></div>

            <button onclick="downloadMarkdown()">Download Markdown</button>
            <button onclick="copyToClipboard()">Copy to Clipboard</button>

            <details>
                <summary>View Markdown Source</summary>
                <pre id="markdown-source"></pre>
            </details>
        </div>
    </div>

    <script>
        // Replace with your API Gateway endpoint
        const API_ENDPOINT = 'https://q273ry0qui.execute-api.us-east-1.amazonaws.com/prod/nova';

        async function submitRequest() {
            const model = document.getElementById('model').value;
            const prompt = document.getElementById('prompt').value;
            const input = document.getElementById('input').value;

            document.getElementById('loading').style.display = 'block';
            document.getElementById('result').style.display = 'none';

            try {
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model_id: model,
                        script_prompt: prompt,
                        user_input: input
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    window.markdownContent = data.result;
                    document.getElementById('markdown-output').innerHTML = marked.parse(data.result);
                    document.getElementById('markdown-source').textContent = data.result;
                    document.getElementById('result').style.display = 'block';
                } else {
                    throw new Error(data.error || 'Request failed');
                }
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }

        function downloadMarkdown() {
            const blob = new Blob([window.markdownContent], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'nova-output.md';
            a.click();
            URL.revokeObjectURL(url);
        }

        function copyToClipboard() {
            navigator.clipboard.writeText(window.markdownContent).catch(err => {
                alert('Failed to copy: ' + err.message);
            });
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</body>

</html>