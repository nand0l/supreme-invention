<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Skillsoft Demo Net</title>
    <link rel="icon" href=".\nova-favicon.ico" type="image/x-icon" />
    <!-- Stylesheets-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
    <link href="https://fonts.cdnfonts.com/css/amazon-ember" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="./css/index.css" />
    <link rel="stylesheet" type="text/css" href="./css/nova.css" />
    <!-- jQuery Plugins -->
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <!-- AWS SDK JavaScript -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.793.0.min.js"></script>
    <!-- Fontawesome Script -->
    <script src="https://kit.fontawesome.com/76cc0c3519.js" crossorigin="anonymous"></script>
</head>


<body>
    <div class="container">
        <h1>Amazon Bedrock - Nova Pro Prompt</h1>

        <label for="model">Choose a model:</label>
        <select id="model">
            <option value="amazon.nova-pro-v1:0">amazon.nova-pro-v1:0</option>
            <option value="us.amazon.nova-lite-v1:0">us.amazon.nova-lite-v1:0</option>
            <option value="us.amazon.nova-micro-v1:0">us.amazon.nova-micro-v1:0</option>
            <option value="us.amazon.nova-premier-v1:0">us.amazon.nova-premier-v1:0</option>
        </select>

        <details>
            <summary>View Model Specifications</summary>
            <textarea id="prompt" rows="10">
                <dynamodb-json>
                    {
  "ExamID": {
    "S": "SAP-C02"
  },
  "QuestionID": {
    "S": "502"
  },
  "CorrectAnswerIndices": {
    "L": [
      {
        "N": "2"
      },
      {
        "N": "3"
      }
    ]
  },
  "Explanation": {
    "S": "‚úÖ\n\n **C. Use the AWS Schema Conversion Tool (AWS SCT) to analyze the source databases for changes that are required.**\n\n **D. Use AWS Database Migration Service (AWS DMS) to migrate the source databases to Amazon RDS.**\n\n AWS Schema Conversion Tool (SCT) analyzes source databases and converts schema, functions, and stored procedures to be compatible with the target database. AWS Database Migration Service (DMS) performs the actual data migration from on-premises databases to Amazon RDS.\n\n ‚ùå **A.** Migration Evaluator and **B.** Application Migration Service are not used for database migration. **E.**DataSync is for file-based transfers, not database workloads.\n\N### üéØ **Final Answer**\n\n‚úîÔ∏è **C. Use the AWS Schema Conversion Tool (AWS SCT) to analyze the source databases for changes that are required.**\n **D. Use AWS Database Migration Service (AWS DMS) to migrate the source databases to Amazon RDS.**"
  },
  "Identifier": {
    "S": "Question 502"
  },
  "Options": {
    "L": [
      {
        "S": "A. Use Migration Evaluator Quick Insights to analyze the source databases and to identify the stored procedures that need to be migrated."
      },
      {
        "S": "B. Use AWS Application Migration Service to analyze the source databases and to identify the stored procedures that need to be migrated."
      },
      {
        "S": "C. Use the AWS Schema Conversion Tool (AWS SCT) to analyze the source databases for changes that are required."
      },
      {
        "S": "D. Use AWS Database Migration Service (AWS DMS) to migrate the source databases to Amazon RDS."
      },
      {
        "S": "E. Use AWS DataSync to migrate the data from the source databases to Amazon RDS."
      }
    ]
  },
  "QuestionText": {
    "S": "A company needs to migrate its on-premises Microsoft SQL Server, MySQL, and Oracle databases to Amazon RDS. Some databases have custom schemas and stored procedures. Which combination of steps should the company take for the migration? (Choose2)"
  }
}
                </dynamodb-json>
                I will post muliple-choice exam questions in simple text format. Your task is to convert each question into a detailed dynamodb-json format so i can use it to upload it as dynamodb-items. 
                Each question will have a set of possible answers, I want you to identify the correct answer and include the indices in the CorrectAnswerIndices field.
                Every question has 1 valid answer unless stated otherwise in the question (e.g., Choose 2).
                Additionally, provide a comprehensive explanation for the correct answers in the Explanation field.
                In the explanation you should reference the correct answers by their letter (A, B, C, etc.) and provide a brief rationale for why each correct answer is valid.
                In the explanation field markdown format is allowed for better readability.
                Ensure that the output strictly adheres to the dynamodb-json structure, using appropriate data types such as "S" for strings and "L" for lists.
                Do NOT include any extra text or formatting outside of the dynamodb-json structure.
                If i copy to clipboard give me te json object only without any extra markdown.
                For QuestionID i want to create a randomnumber between 100 and 999.
                Here is the question:

            </textarea>
        </details><br>
        <label for="ExamID">Enter The ExamID</label>
        <input type="text" id="ExamID" name="ExamID" value="SAP-C02"><br>
        <label for="input">Enter your Question an possible Answers</label>
        <textarea id="input" rows="8" placeholder="Your Question..."></textarea>

        <button onclick="submitRequest()">Submit</button>

        <div class="loading" id="loading">Processing...</div>

        <div id="result" class="result" style="display: none;">
            <button onclick="downloadMarkdown()">Download Markdown</button>
            <button onclick="copyToClipboard()">Copy to Clipboard</button>
            
            <div id="markdown-output"></div>

            <details>
                <summary>View Markdown Source</summary>
                <pre id="markdown-source"></pre>
            </details>
        </div>
    </div>

    <script>
        // Replace with your API Gateway endpoint
        const API_ENDPOINT = 'https://q273ry0qui.execute-api.us-east-1.amazonaws.com/prod/nova';

        async function submitRequest() {
            const model = document.getElementById('model').value;
            const examId = document.getElementById('ExamID').value;
            let prompt = document.getElementById('prompt').value;
            const input = document.getElementById('input').value;

            // Replace ExamID in prompt
            prompt = prompt.replace(/"ExamID":\s*{\s*"S":\s*"[^"]*"/g, `"ExamID": {\n    "S": "${examId}"`);

            document.getElementById('loading').style.display = 'block';
            document.getElementById('result').style.display = 'none';

            try {
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model_id: model,
                        script_prompt: prompt,
                        user_input: input
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    window.markdownContent = data.result;
                    document.getElementById('markdown-output').innerHTML = marked.parse(data.result);
                    document.getElementById('markdown-source').textContent = data.result;
                    document.getElementById('result').style.display = 'block';
                } else {
                    throw new Error(data.error || 'Request failed');
                }
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }
        
        function downloadMarkdown() {
            const blob = new Blob([window.markdownContent], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const questionIdMatch = window.markdownContent.match(/"QuestionID":\s*{\s*"S":\s*"(\d+)"/i);
            const questionId = questionIdMatch ? questionIdMatch[1] : 'output';
            a.download = `nova-${questionId}.md`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function copyToClipboard() {
            navigator.clipboard.writeText(window.markdownContent).catch(err => {
                alert('Failed to copy: ' + err.message);
            });
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</body>

</html>