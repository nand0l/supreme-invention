<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Nova</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }

        select,
        textarea,
        button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            background: #007bff;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background: #0056b3;
        }

        .result {
            background: white;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
        }

        .loading {
            display: none;
            text-align: center;
        }

        .error {
            color: red;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Amazon Bedrock - Nova Pro Prompt</h1>

        <label for="model">Choose a model:</label>
        <select id="model">
            <option value="amazon.nova-pro-v1:0">amazon.nova-pro-v1:0</option>
            <option value="us.amazon.nova-lite-v1:0">us.amazon.nova-lite-v1:0</option>
            <option value="us.amazon.nova-micro-v1:0">us.amazon.nova-micro-v1:0</option>
            <option value="us.amazon.nova-premier-v1:0">us.amazon.nova-premier-v1:0</option>
        </select>

        <details>
            <summary>View Model Specifications</summary>
            <textarea id="prompt" rows="10">You are an expert educational content writer. I will provide a summary with some bullet points. Your task is to rewrite it into a full-length article that can be included in a student syllabus module. The tone should be educational, clear, and supportive.

If any complex or technical terms are used, explain them in simple language suitable for students with mixed backgrounds. Use only ASCII characters and format the response in clean, readable Markdown. Structure the output with appropriate headings, subheadings, paragraphs, and bullet points.

Start the article with a short introduction and end with a summary or reflection section.
The markdown header for your output should be "##" because the first header is already used for the title.
Here is the summary:
</textarea>
        </details>

        <label for="input">Enter your summary or bullet points:</label>
        <textarea id="input" rows="8" placeholder="Your summary..."></textarea>

        <button onclick="submitRequest()">Submit</button>

        <div class="loading" id="loading">Processing...</div>

        <div id="result" class="result" style="display: none;">
            <div id="markdown-output"></div>
            
            <button onclick="downloadMarkdown()">Download Markdown</button>
            <button onclick="copyToClipboard()">Copy to Clipboard</button>

            <details>
                <summary>View Markdown Source</summary>
                <pre id="markdown-source"></pre>
            </details>
        </div>
    </div>

    <script>
        // Replace with your API Gateway endpoint
        const API_ENDPOINT = 'https://q273ry0qui.execute-api.us-east-1.amazonaws.com/prod/nova';
        let lastSubmitTime = 0;

        async function submitRequest() {
            const now = Date.now();
            if (now - lastSubmitTime < 20000) {
                alert('Please wait ' + Math.ceil((20000 - (now - lastSubmitTime)) / 1000) + ' seconds before submitting again.');
                return;
            }
            lastSubmitTime = now;
            const model = document.getElementById('model').value;
            const prompt = document.getElementById('prompt').value;
            const input = document.getElementById('input').value;

            document.getElementById('loading').style.display = 'block';
            document.getElementById('result').style.display = 'none';

            try {
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model_id: model,
                        script_prompt: prompt,
                        user_input: input
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    window.markdownContent = data.result;
                    document.getElementById('markdown-output').innerHTML = marked.parse(data.result);
                    document.getElementById('markdown-source').textContent = data.result;
                    document.getElementById('result').style.display = 'block';
                } else {
                    lastSubmitTime = 0;
                    throw new Error(data.error || 'Request failed');
                }
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }
        
        function downloadMarkdown() {
            const blob = new Blob([window.markdownContent], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'nova-output.md';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function copyToClipboard() {
            navigator.clipboard.writeText(window.markdownContent).then(() => {
                alert('Markdown copied to clipboard!');
            }).catch(err => {
                alert('Failed to copy: ' + err.message);
            });
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</body>

</html>